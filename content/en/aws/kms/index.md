---
title: "Key Management Service (KMS)"
linkTitle: "Key Management Service (KMS)"
categories: ["LocalStack Community"]
description: Get started with Amazon Key Management Service
---

Amazon KMS is a Key Management Service that let you create cryptographic keys that you can use to encrypt and decrypt data and also other keys. AWS KMS also allows you to audit the usage of your keys by providing you logs of all API calls made on them to help you meet compliance & regulatory requirements. KMS is available over LocalStack Community and the supported APIs are available over our [configuration page]({{< ref "configuration" >}}).

## Getting started

In this getting started guide, you'll learn how to make a basic usage of KMS over LocalStack. This guide is intended for users who wish to get more acquainted with KMS, and assumes you have basic knowledge of the AWS CLI (and our `awslocal` wrapper script). To get started, start your LocalStack instance using your preferred method:

1. Create a KMS key, a symmetric encryption key, in a single Region backed by key material generated by KMS:
   {{< command >}}
   $ awslocal kms create-key
   {{< /command >}}

2. Use the `GetKeyPolicy` operation to return the key policy that the previous `CreateKey` applies:
   {{< command >}}
   $ awslocal kms get-key-policy --key-id <KEY_ID> --policy-name default --output text
   {{< /command >}}

3. Create an alias for the KMS key and associates it with the specified KMS key:
   {{< command >}}
   $ awslocal kms create-alias \
    --alias-name alias/example-key \
    --target-key-id <KEY_ID>
   {{< /command >}}

4. Get a list of all the aliases in KMS:
   {{< command >}}
   $ awslocal kms list-aliases
   {{< /command >}}

5. Get a list of the ID and Amazon Resource Name (ARN) of all KMS keys:
   {{< command >}}
   $ awslocal kms list-keys
   {{< /command >}}

6. Add or change the tags for a KMS key:
   {{< command >}}
   $ awslocal kms tag-resource \
     --key-id <KEY_ID> \
     --tags TagKey=Purpose,TagValue=Pretest TagKey=Department,TagValue=Finance
   {{< /command >}}

7. Get the tags for a KMS key:
   {{< command >}}
   $ awslocal kms list-resource-tags --key-id <KEY_ID>
   {{< /command >}}

8. Enable or disable a KMS key using `EnableKey` and `DisableKey` operations respectively:
   {{< command >}}
   $ awslocal kms enable-key --key-id <KEY_ID>
   $ awslocal kms disable-key --key-id <KEY_ID>
   {{< /command >}}

9. You can schedule a key deletion using `ScheduleKeyDeletion` operation:
   {{< command >}}
   $ awslocal kms schedule-key-deletion --key-id <KEY_ID> --pending-window-in-days 10
   {{< /command >}}
   To cancel the deletion, use the `CancelKeyDeletion` operation:
   {{< command >}}
   $ awslocal kms cancel-key-deletion --key-id <KEY_ID>
   {{< /command >}}

To know more about using Amazon KMS, refer the [official AWS KMS developer guide](https://docs.aws.amazon.com/kms/latest/developerguide/overview.html).

## Using LocalStack Pro

LocalStack Pro users can access our [LocalStack App's](https://app.localstack.cloud) web user-interface to work with KMS and other AWS services. It is a convenient way to work with KMS, and allows you to create and manage keys, their usage, specification, and much more, in a fashion similar to the AWS console. While using the LocalStack App, ensure you have the LocalStack instance running.

1. Login to the [web user-interface](https://app.localstack.cloud) and select the `KMS` service from the `Resources` drop-down.
2. Click on the `Create Key` button to create a new key.
3. Enter the `Policy`, `Description`, `Key Usage`, `Key Spec`, `Tags` and other details for the key.
4. You will be able to see the Key ID in the `KMS Keys` page. Run the following command locally to test the KMS key:
   {{< command >}}
   $ awslocal kms list-keys
   {{< /command >}}
5. Use the web user-interface to perform further operations on the KMS key, by using the edit option, or scheduling a key deletion.
