---
title: "Key Management Service (KMS)"
linkTitle: "Key Management Service (KMS)"
categories: ["LocalStack Community"]
description: Get started with Amazon Key Management Service
---

Amazon KMS is a Key Management Service that let you create cryptographic keys that you can use to encrypt and decrypt data and also other keys. KMS enables users to maintain these control encryption keys, also called as Customer Master Keys, which allows users to encrypt and decrypt data on AWS. 

AWS KMS also allows you to audit the usage of your keys by providing you logs of all API calls made on them to help you meet compliance & regulatory requirements. KMS is available over LocalStack Community and the supported APIs are available over our [configuration page]({{< ref "configuration" >}}).

## Getting started

In this getting started guide, you'll learn how to make a basic usage of SNS over LocalStack. This guide is intended for users who wish to get more acquainted with KMS, and assumes you have basic knowledge of the AWS CLI (and our `awslocal` wrapper script). To get started, start your LocalStack instance using your preferred method:

1. Create a KMS key, a symmetric encryption key, in a single Region backed by key material generated by KMS:
   {{< command >}}
   $ awslocal kms create-key
   {{< /command >}}

2. Use the `GetKeyPolicy` operation to return the key policy that the previous `CreateKey` applies:
   {{< command >}}
   $ awslocal kms get-key-policy --key-id 70047aca-9645-4148-a1ed-1ba7fbdd7de0 --policy-name default --output text
   {{< /command >}}

3. Create an alias for the KMS key and associates it with the specified KMS key:
   {{< command >}}
   $ awslocal kms create-alias \
    --alias-name alias/example-key \
    --target-key-id 70047aca-9645-4148-a1ed-1ba7fbdd7de0
   {{< /command >}}

4. Get a list of all the aliases in KMS:
   {{< command >}}
   $ awslocal kms list-aliases
   {{< /command >}}

5. Get a list of the ID and Amazon Resource Name (ARN) of all KMS keys:
   {{< command >}}
   $ awslocal kms list-keys
   {{< /command >}}

6. Add or change the tags for a KMS key:
   {{< command >}}
   $ awslocal kms tag-resource \
     --key-id 70047aca-9645-4148-a1ed-1ba7fbdd7de0 \
     --tags TagKey=Purpose,TagValue=Pretest TagKey=Department,TagValue=Finance
   {{< /command >}}

7. Get the tags for a KMS key:
   {{< command >}}
   $ awslocal kms list-resource-tags --key-id 70047aca-9645-4148-a1ed-1ba7fbdd7de0
   {{< /command >}}

8. Enable or disable a KMS key using `EnableKey` and `DisableKey` operations respectively:
   {{< command >}}
   $ awslocal kms enable-key --key-id 70047aca-9645-4148-a1ed-1ba7fbdd7de0
   $ awslocal kms disable-key --key-id 70047aca-9645-4148-a1ed-1ba7fbdd7de0
   {{< /command >}}

9. Enable and disable automatic key rotation using `EnableKeyRotation` and `DisableKeyRotation` operation:
   {{< command >}}
   $ awslocal kms enable-key-rotation --key-id 70047aca-9645-4148-a1ed-1ba7fbdd7de0
   $ awslocal kms disable-key-rotation --key-id 70047aca-9645-4148-a1ed-1ba7fbdd7de0
   {{< /command >}}
   You can further use the `GetKeyRotationStatus` operation to check the status of automatic key rotation.
   {{< command >}}
   $ awslocal kms get-key-rotation-status --key-id 70047aca-9645-4148-a1ed-1ba7fbdd7de0
   {{< /command >}}

10. You can schedule a key deletion using `ScheduleKeyDeletion` operation:
   {{< command >}}
   $ awslocal kms schedule-key-deletion --key-id 70047aca-9645-4148-a1ed-1ba7fbdd7de0 --pending-window-in-days 10
   {{< /command >}}
   To cancel the deletion, use the `CancelKeyDeletion` operation:
   {{< command >}}
   $ awslocal kms cancel-key-deletion --key-id 70047aca-9645-4148-a1ed-1ba7fbdd7de0
   {{< /command >}}